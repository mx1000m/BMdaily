{"version":3,"file":"useNotification.js","sources":["../../../src/minikit/hooks/useNotification.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { useMiniKit } from './useMiniKit';\n\n/**\n * Sends notification data to the notification proxy URL set in the MiniKit context\n * @param title - The title of the notification.\n * @param body - The body of the notification.\n * @returns boolean - true if the notification was sent successfully, false otherwise\n */\nexport function useNotification() {\n  const { context, notificationProxyUrl } = useMiniKit();\n\n  return useCallback(\n    async ({ title, body }: { title: string; body: string }) => {\n      if (!context) {\n        return false;\n      }\n\n      try {\n        const response = await fetch(notificationProxyUrl, {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            fid: context.user.fid,\n            notification: {\n              notificationId: crypto.randomUUID(),\n              notificationDetails: context.client?.notificationDetails ?? null,\n              title,\n              body,\n            },\n          }),\n        });\n\n        if (!response.ok) {\n          throw new Error(`HTTP error, status: ${response.status}`);\n        }\n\n        return true;\n      } catch (error) {\n        console.error('Error sending notification:', error);\n        return false;\n      }\n    },\n    [context, notificationProxyUrl],\n  );\n}\n"],"names":[],"mappings":";;AASO,SAAS,kBAAkB;AAChC,QAAM,EAAE,SAAS,qBAAqB,IAAI,WAAW;AAE9C,SAAA;AAAA,IACL,OAAO,EAAE,OAAO,WAA4C;;AAC1D,UAAI,CAAC,SAAS;AACL,eAAA;AAAA,MAAA;AAGL,UAAA;AACI,cAAA,WAAW,MAAM,MAAM,sBAAsB;AAAA,UACjD,QAAQ;AAAA,UACR,SAAS;AAAA,YACP,gBAAgB;AAAA,UAClB;AAAA,UACA,MAAM,KAAK,UAAU;AAAA,YACnB,KAAK,QAAQ,KAAK;AAAA,YAClB,cAAc;AAAA,cACZ,gBAAgB,OAAO,WAAW;AAAA,cAClC,uBAAqB,aAAQ,WAAR,mBAAgB,wBAAuB;AAAA,cAC5D;AAAA,cACA;AAAA,YAAA;AAAA,UAEH,CAAA;AAAA,QAAA,CACF;AAEG,YAAA,CAAC,SAAS,IAAI;AAChB,gBAAM,IAAI,MAAM,uBAAuB,SAAS,MAAM,EAAE;AAAA,QAAA;AAGnD,eAAA;AAAA,eACA,OAAO;AACN,gBAAA,MAAM,+BAA+B,KAAK;AAC3C,eAAA;AAAA,MAAA;AAAA,IAEX;AAAA,IACA,CAAC,SAAS,oBAAoB;AAAA,EAChC;AACF;"}