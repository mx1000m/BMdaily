{"version":3,"file":"buildDepositToMorphoTx.js","sources":["../../../src/earn/utils/buildDepositToMorphoTx.ts"],"sourcesContent":["import { MORPHO_VAULT_ABI } from '@/earn/abis/morpho';\nimport type { Call } from '@/transaction/types';\nimport { type Address, encodeFunctionData, erc20Abi } from 'viem';\n\nexport type DepositToMorphoParams = {\n  /** The address of the Morpho vault */\n  vaultAddress: Address;\n  /** The address of the token to deposit */\n  tokenAddress: Address;\n  /** The amount of tokens to deposit */\n  amount: bigint;\n  /** The address which can withdraw the deposited tokens */\n  recipientAddress: Address;\n};\n\nexport function buildDepositToMorphoTx({\n  vaultAddress,\n  tokenAddress,\n  amount,\n  recipientAddress,\n}: DepositToMorphoParams): Call[] {\n  // User needs to approve the token they're depositing\n  const approveTxData = encodeFunctionData({\n    abi: erc20Abi,\n    functionName: 'approve',\n    args: [vaultAddress, amount],\n  });\n\n  // Once approved, user can deposit the token into the vault\n  const depositTxData = encodeFunctionData({\n    abi: MORPHO_VAULT_ABI,\n    functionName: 'deposit',\n    args: [amount, recipientAddress],\n  });\n\n  return [\n    {\n      to: tokenAddress,\n      data: approveTxData,\n    },\n    {\n      to: vaultAddress,\n      data: depositTxData,\n    },\n  ];\n}\n"],"names":[],"mappings":";;AAeO,SAAS,uBAAuB;AAAA,EACrC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF,GAAkC;AAEhC,QAAM,gBAAgB,mBAAmB;AAAA,IACvC,KAAK;AAAA,IACL,cAAc;AAAA,IACd,MAAM,CAAC,cAAc,MAAM;AAAA,EAAA,CAC5B;AAGD,QAAM,gBAAgB,mBAAmB;AAAA,IACvC,KAAK;AAAA,IACL,cAAc;AAAA,IACd,MAAM,CAAC,QAAQ,gBAAgB;AAAA,EAAA,CAChC;AAEM,SAAA;AAAA,IACL;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,IACR;AAAA,IACA;AAAA,MACE,IAAI;AAAA,MACJ,MAAM;AAAA,IAAA;AAAA,EAEV;AACF;"}