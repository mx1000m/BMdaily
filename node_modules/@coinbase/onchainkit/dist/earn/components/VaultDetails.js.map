{"version":3,"file":"VaultDetails.js","sources":["../../../src/earn/components/VaultDetails.tsx"],"sourcesContent":["'use client';\nimport { getTruncatedAmount } from '@/earn/utils/getTruncatedAmount';\nimport { Popover } from '@/internal/components/Popover';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { etherscanSvg } from '@/internal/svg/etherscanSvg';\nimport { infoSvg } from '@/internal/svg/infoSvg';\nimport { background, border, cn, color, text } from '@/styles/theme';\nimport { TokenImage } from '@/token';\nimport { useRef } from 'react';\nimport { useState } from 'react';\nimport { useEarnContext } from './EarnProvider';\n\nfunction Row({ label, value }: { label: string; value: React.ReactNode }) {\n  return (\n    <div className=\"flex items-center justify-between gap-8\">\n      <div>{label}</div>\n      <div className=\"font-semibold\">{value}</div>\n    </div>\n  );\n}\n\nexport function VaultDetails() {\n  const [isOpen, setIsOpen] = useState(false);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n  const anchorRef = useRef<HTMLDivElement>(null);\n  const { vaultToken, vaultName, deposits, liquidity, vaultAddress } =\n    useEarnContext();\n\n  if (!vaultToken || !vaultName) {\n    return <Skeleton className=\"!rounded-full h-7 min-w-28\" />;\n  }\n\n  return (\n    <div\n      ref={anchorRef}\n      className={cn(\n        text.label1,\n        color.foregroundMuted,\n        background.alternate,\n        'flex items-center justify-center gap-2 rounded-full p-1 px-3',\n      )}\n      data-testid=\"ock-vaultDetails\"\n    >\n      <TokenImage token={vaultToken} size={16} />\n      <span className=\"max-w-24 truncate\" title={vaultName}>\n        {vaultName}\n      </span>\n      <button\n        ref={triggerRef}\n        type=\"button\"\n        data-testid=\"ock-vaultDetailsButton\"\n        className={cn(\n          'size-3 [&_path]:fill-[var(--ock-icon-color-foreground-muted)] [&_path]:transition-colors [&_path]:ease-in-out [&_path]:hover:fill-[var(--ock-icon-color-foreground)]',\n          isOpen && '[&_path]:fill-[var(--ock-icon-color-foreground)]',\n        )}\n        onClick={() => setIsOpen(!isOpen)}\n      >\n        {infoSvg}\n      </button>\n\n      <Popover\n        isOpen={isOpen}\n        onClose={() => setIsOpen(false)}\n        position=\"bottom\"\n        align=\"start\"\n        trigger={triggerRef}\n        anchor={anchorRef.current}\n        offset={4}\n      >\n        <div\n          className={cn(\n            background.default,\n            color.foreground,\n            border.defaultActive,\n            background.default,\n            'flex min-w-40 flex-col gap-3 rounded-lg border p-3 text-sm',\n            'fade-in animate-in duration-200',\n          )}\n        >\n          <div className=\"font-semibold\">{vaultName}</div>\n          <div className=\"flex flex-col gap-2\">\n            <Row\n              label=\"Token\"\n              value={\n                <div className=\"flex items-center gap-1\">\n                  <TokenImage token={vaultToken} size={16} />\n                  <span className=\"max-w-24 truncate\">{vaultToken.symbol}</span>\n                </div>\n              }\n            />\n            {deposits ? (\n              <Row\n                label=\"Total deposits\"\n                value={`${getTruncatedAmount(deposits, 1, 'compact')} ${\n                  vaultToken.symbol\n                }`}\n              />\n            ) : null}\n            {liquidity ? (\n              <Row\n                label=\"Liquidity\"\n                value={`${getTruncatedAmount(liquidity, 1, 'compact')} ${\n                  vaultToken.symbol\n                }`}\n              />\n            ) : null}\n          </div>\n          <a\n            href={`https://basescan.org/address/${vaultAddress}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className={cn(\n              color.primary,\n              'flex max-w-fit items-center gap-1 hover:opacity-80',\n            )}\n            data-testid=\"ock-vaultDetailsBaseScanLink\"\n          >\n            <div>View on BaseScan</div>\n            <div className=\"h-3 w-3\">{etherscanSvg}</div>\n          </a>\n        </div>\n      </Popover>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}