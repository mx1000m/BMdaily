{"version":3,"file":"AppchainBridgeWithdraw.js","sources":["../../../../src/appchain/bridge/components/AppchainBridgeWithdraw.tsx"],"sourcesContent":["'use client';\nimport { Spinner } from '@/internal/components/Spinner';\nimport { ErrorSvg } from '@/internal/svg/fullWidthErrorSvg';\nimport { SuccessSvg } from '@/internal/svg/fullWidthSuccessSvg';\nimport { border, cn, color, pressable, text } from '@/styles/theme';\nimport { useEffect } from 'react';\nimport { useWithdrawButton } from '../hooks/useWithdrawButton';\nimport { useAppchainBridgeContext } from './AppchainBridgeProvider';\n\nconst buttonStyles = cn(\n  pressable.primary,\n  border.radius,\n  'w-full rounded-xl',\n  'px-4 py-3 font-medium text-base text-white leading-6',\n  text.headline,\n);\n\nexport const AppchainBridgeWithdraw = () => {\n  const {\n    withdrawStatus,\n    waitForWithdrawal,\n    resumeWithdrawalTxHash,\n    handleResetState,\n  } = useAppchainBridgeContext();\n\n  const { shouldShowClaim, label, isError, isPending } = useWithdrawButton({\n    withdrawStatus,\n  });\n\n  useEffect(() => {\n    (async () => {\n      if (withdrawStatus === 'withdrawSuccess') {\n        // If appchain withdrawal is successful, wait for claim to be ready\n        waitForWithdrawal();\n      }\n      if (resumeWithdrawalTxHash) {\n        // If the user has resumed a withdrawal transaction, wait for claim to be ready\n        waitForWithdrawal(resumeWithdrawalTxHash);\n      }\n    })();\n  }, [withdrawStatus, waitForWithdrawal, resumeWithdrawalTxHash]);\n\n  return (\n    <div className=\"flex h-full w-full flex-col justify-between\">\n      <div>\n        <div className=\"flex items-center\">\n          <h2 className=\"ock-text-foreground flex-1 text-center font-medium text-lg\">\n            {label}\n          </h2>\n        </div>\n      </div>\n      <div className=\"mt-16 px-4 pb-4\">\n        {isError && <ErrorContent onBack={handleResetState} />}\n        {isPending && <LoadingContent />}\n        {shouldShowClaim && <ClaimContent />}\n        {withdrawStatus === 'claimRejected' && (\n          <div className={cn(text.label2, color.error, 'mt-2')}>\n            Transaction denied\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nfunction LoadingContent() {\n  return (\n    <div className=\"flex h-full flex-col items-center justify-center gap-16\">\n      <Spinner className=\"!border-t-[var(--ock-bg-primary)] h-24 w-24\" />\n      <span className=\"px-4 text-center font-medium text-base\">\n        Waiting for claim to be ready...\n        <br />\n        Please do not close this window.\n      </span>\n    </div>\n  );\n}\n\nfunction ErrorContent({ onBack }: { onBack: () => void }) {\n  return (\n    <div className=\"flex flex-col items-center gap-16\">\n      <div className=\"flex justify-center\">\n        <div className=\"h-20 w-20\">\n          <ErrorSvg fill=\"var(--ock-bg-error)\" />\n        </div>\n      </div>\n      <div className=\"flex flex-col items-center gap-4\">\n        <span className=\"px-4 text-center font-medium text-base\">\n          There was an error processing your withdrawal.\n          <br />\n          If the issue persists, please contact support.\n        </span>\n        <button onClick={onBack} className={buttonStyles} type=\"button\">\n          <div\n            className={cn(text.headline, color.inverse, 'flex justify-center')}\n          >\n            Back to bridge\n          </div>\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction ClaimContent() {\n  const { withdrawStatus, proveAndFinalizeWithdrawal } =\n    useAppchainBridgeContext();\n\n  const { buttonDisabled, buttonContent } = useWithdrawButton({\n    withdrawStatus,\n  });\n\n  return (\n    <div className=\"flex flex-col items-center gap-16\">\n      <div className=\"flex justify-center\">\n        <div className=\"h-20 w-20\">\n          <SuccessSvg fill=\"var(--ock-bg-primary)\" />\n        </div>\n      </div>\n      <button\n        onClick={proveAndFinalizeWithdrawal}\n        className={cn(buttonStyles, buttonDisabled && pressable.disabled)}\n        type=\"button\"\n      >\n        <div\n          className={cn(text.headline, color.inverse, 'flex justify-center')}\n        >\n          {buttonContent}\n        </div>\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}