{"version":3,"file":"AppchainBridgeInput.js","sources":["../../../../src/appchain/bridge/components/AppchainBridgeInput.tsx"],"sourcesContent":["'use client';\nimport { Address } from '@/identity';\nimport { useMemo, useState } from 'react';\nimport { useAccount } from 'wagmi';\nimport { TextInput } from '../../../internal/components/TextInput';\nimport { isValidAmount } from '../../../internal/utils/isValidAmount';\nimport { background, border, cn, color, text } from '../../../styles/theme';\nimport { TokenSelectDropdown } from '../../../token';\nimport { useAppchainBridgeContext } from './AppchainBridgeProvider';\n\ninterface AppchainBridgeInputProps {\n  className?: string;\n  delayMs?: number;\n}\n\nexport function AppchainBridgeInput({\n  className,\n  delayMs = 50,\n}: AppchainBridgeInputProps) {\n  const {\n    balance,\n    bridgeParams,\n    bridgeableTokens,\n    to,\n    isPriceLoading,\n    handleAmountChange,\n    setIsAddressModalOpen,\n    resetDepositStatus,\n  } = useAppchainBridgeContext();\n  const [currentToken, setCurrentToken] = useState(bridgeableTokens[0]);\n  const { address } = useAccount();\n  const insufficientBalance = useMemo(() => {\n    return balance && Number(balance) < Number(bridgeParams.amount);\n  }, [balance, bridgeParams.amount]);\n\n  const label = useMemo(() => {\n    if (insufficientBalance) {\n      return 'Insufficient funds';\n    }\n    if (isPriceLoading) {\n      return (\n        <div className=\"h-4 w-16 animate-pulse rounded bg-gray-200 dark:bg-gray-700\" />\n      );\n    }\n    if (bridgeParams.amountUSD === 'NaN') {\n      return '';\n    }\n    return `~$${bridgeParams.amountUSD}`;\n  }, [insufficientBalance, isPriceLoading, bridgeParams.amountUSD]);\n\n  return (\n    <div\n      className={cn(\n        background.secondary,\n        border.radius,\n        'box-border flex h-[148px] w-full flex-col items-start p-4',\n        className,\n      )}\n      data-testid=\"ockBridgeAmountInput_Container\"\n    >\n      <div className=\"flex w-full items-center justify-between\">\n        <span\n          className={cn(\n            text.label2,\n            color.foregroundMuted,\n            'flex items-center gap-1',\n          )}\n        >\n          Send to{' '}\n          <button\n            type=\"button\"\n            className={cn(\n              'cursor-pointer hover:underline focus:outline-none',\n              text.label2,\n            )}\n            onClick={() => {\n              setIsAddressModalOpen(true);\n            }}\n            title={bridgeParams.recipient}\n          >\n            <Address\n              address={\n                bridgeParams.recipient ||\n                '0x0000000000000000000000000000000000000000'\n              }\n              hasCopyAddressOnClick={false}\n              className={cn(text.label2, '!text-[var(--ock-text-foreground)]')}\n            />\n          </button>{' '}\n          on <span className=\"inline-flex h-4 w-4 items-center\">{to.icon}</span>\n        </span>\n      </div>\n      <div className=\"flex w-full items-center justify-between\">\n        <TextInput\n          className={cn(\n            'mr-2 w-full border-[none] bg-transparent font-display text-[2.5rem]',\n            'leading-none outline-none',\n            color.foreground,\n            insufficientBalance && color.error,\n          )}\n          placeholder=\"0.00\"\n          delayMs={delayMs}\n          inputValidator={isValidAmount}\n          onChange={(value) => {\n            handleAmountChange({\n              amount: value,\n              token: currentToken,\n            });\n          }}\n          value={bridgeParams.amount}\n        />\n        <TokenSelectDropdown\n          token={currentToken}\n          options={bridgeableTokens}\n          setToken={(token) => {\n            handleAmountChange({\n              amount: bridgeParams.amount,\n              token: token,\n            });\n            resetDepositStatus();\n            setCurrentToken(token);\n          }}\n        />\n      </div>\n      <div className=\"mt-4 flex w-full justify-between\">\n        <div className=\"flex items-center\">\n          <span\n            className={cn(\n              text.label2,\n              color.foregroundMuted,\n              insufficientBalance && color.error,\n            )}\n          >\n            {label}\n          </span>\n        </div>\n        {address && (\n          <div className=\"flex items-center\">\n            <span\n              className={cn(text.label2, color.foregroundMuted)}\n            >{`Balance: ${Number(balance).toLocaleString(undefined, {\n              maximumFractionDigits: 5,\n              minimumFractionDigits: 0,\n            })}`}</span>\n            <button\n              type=\"button\"\n              className=\"flex cursor-pointer items-center justify-center px-2 py-1\"\n              data-testid=\"ockBridgeAmountInput_MaxButton\"\n              onClick={() => {\n                handleAmountChange({\n                  amount: balance,\n                  token: bridgeParams.token,\n                });\n              }}\n            >\n              <span className={cn(text.label1, color.primary)}>Max</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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"}