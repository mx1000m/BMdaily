{"version":3,"file":"convertReverseNodeToBytes.js","sources":["../../../src/identity/utils/convertReverseNodeToBytes.ts"],"sourcesContent":["import { encodePacked, keccak256, namehash } from 'viem';\nimport type { Address } from 'viem';\nimport { convertChainIdToCoinType } from './convertChainIdToCoinType';\n\n/**\n * Convert an address to a reverse node for ENS resolution\n */\nexport const convertReverseNodeToBytes = (\n  address: Address,\n  chainId: number,\n) => {\n  const addressFormatted = address.toLocaleLowerCase() as Address;\n  const addressNode = keccak256(addressFormatted.substring(2) as Address);\n  const chainCoinType = convertChainIdToCoinType(chainId);\n  const baseReverseNode = namehash(\n    `${chainCoinType.toLocaleUpperCase()}.reverse`,\n  );\n  const addressReverseNode = keccak256(\n    encodePacked(['bytes32', 'bytes32'], [baseReverseNode, addressNode]),\n  );\n  return addressReverseNode;\n};\n"],"names":[],"mappings":";;AAOa,MAAA,4BAA4B,CACvC,SACA,YACG;AACG,QAAA,mBAAmB,QAAQ,kBAAkB;AACnD,QAAM,cAAc,UAAU,iBAAiB,UAAU,CAAC,CAAY;AAChE,QAAA,gBAAgB,yBAAyB,OAAO;AACtD,QAAM,kBAAkB;AAAA,IACtB,GAAG,cAAc,kBAAA,CAAmB;AAAA,EACtC;AACA,QAAM,qBAAqB;AAAA,IACzB,aAAa,CAAC,WAAW,SAAS,GAAG,CAAC,iBAAiB,WAAW,CAAC;AAAA,EACrE;AACO,SAAA;AACT;"}