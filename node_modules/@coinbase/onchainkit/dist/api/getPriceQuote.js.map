{"version":3,"file":"getPriceQuote.js","sources":["../../src/api/getPriceQuote.ts"],"sourcesContent":["import { RequestContext } from '@/core/network/constants';\nimport { CDP_GET_PRICE_QUOTE } from '@/core/network/definitions/wallet';\nimport { sendRequest } from '@/core/network/request';\n\nimport type { GetPriceQuoteParams, GetPriceQuoteResponse } from './types';\n\n/**\n * Retrieves a price quote for a token\n *\n * @param params - The parameters for the price quote. The property `tokens`\n * must be an array of contract addresses or 'ETH'.\n * @param _context - The context in which the price quote is retrieved\n * @returns The price quote for the token\n */\nexport async function getPriceQuote(\n  params: GetPriceQuoteParams,\n  _context: RequestContext = RequestContext.API,\n): Promise<GetPriceQuoteResponse> {\n  const apiParams = validateGetPriceQuoteParams(params);\n  if ('error' in apiParams) {\n    return apiParams;\n  }\n\n  try {\n    const res = await sendRequest<GetPriceQuoteParams, GetPriceQuoteResponse>(\n      CDP_GET_PRICE_QUOTE,\n      [apiParams],\n      _context,\n    );\n    if (res.error) {\n      return {\n        code: String(res.error.code),\n        error: 'Error fetching price quote',\n        message: res.error.message,\n      };\n    }\n    return res.result;\n  } catch (error) {\n    return {\n      code: 'UNCAUGHT_PRICE_QUOTE_ERROR',\n      error: 'Something went wrong',\n      message: `Error fetching price quote: ${error}`,\n    };\n  }\n}\n\nfunction validateGetPriceQuoteParams(params: GetPriceQuoteParams) {\n  const { tokens } = params;\n\n  if (!tokens || tokens.length === 0) {\n    return {\n      code: 'INVALID_INPUT',\n      error: 'Invalid input: tokens must be an array of at least one token',\n      message: 'Tokens must be an array of at least one token',\n    };\n  }\n\n  return params;\n}\n"],"names":[],"mappings":";;;AAcA,eAAsB,cACpB,QACA,WAA2B,eAAe,KACV;AAC1B,QAAA,YAAY,4BAA4B,MAAM;AACpD,MAAI,WAAW,WAAW;AACjB,WAAA;AAAA,EAAA;AAGL,MAAA;AACF,UAAM,MAAM,MAAM;AAAA,MAChB;AAAA,MACA,CAAC,SAAS;AAAA,MACV;AAAA,IACF;AACA,QAAI,IAAI,OAAO;AACN,aAAA;AAAA,QACL,MAAM,OAAO,IAAI,MAAM,IAAI;AAAA,QAC3B,OAAO;AAAA,QACP,SAAS,IAAI,MAAM;AAAA,MACrB;AAAA,IAAA;AAEF,WAAO,IAAI;AAAA,WACJ,OAAO;AACP,WAAA;AAAA,MACL,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS,+BAA+B,KAAK;AAAA,IAC/C;AAAA,EAAA;AAEJ;AAEA,SAAS,4BAA4B,QAA6B;AAC1D,QAAA,EAAE,WAAW;AAEnB,MAAI,CAAC,UAAU,OAAO,WAAW,GAAG;AAC3B,WAAA;AAAA,MACL,MAAM;AAAA,MACN,OAAO;AAAA,MACP,SAAS;AAAA,IACX;AAAA,EAAA;AAGK,SAAA;AACT;"}