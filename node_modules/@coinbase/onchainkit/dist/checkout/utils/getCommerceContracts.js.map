{"version":3,"file":"getCommerceContracts.js","sources":["../../../src/checkout/utils/getCommerceContracts.ts"],"sourcesContent":["import { type ContractFunctionParameters, erc20Abi } from 'viem';\nimport { COMMERCE_ABI, CONTRACT_METHODS } from '../constants';\nimport type { GetCommerceContractsParams } from '../types';\n\nexport function getCommerceContracts({\n  transaction,\n}: GetCommerceContractsParams): ContractFunctionParameters[] {\n  const { callData, metaData } = transaction;\n\n  return [\n    {\n      address: callData.recipientCurrency,\n      abi: erc20Abi,\n      functionName: CONTRACT_METHODS.APPROVE,\n      args: [\n        metaData.contractAddress,\n        BigInt(callData.recipientAmount) + BigInt(callData.feeAmount),\n      ],\n    },\n    {\n      address: metaData.contractAddress,\n      abi: COMMERCE_ABI,\n      functionName: CONTRACT_METHODS.TRANSFER_TOKEN_PRE_APPROVED,\n      args: [\n        {\n          id: callData.id,\n          recipientAmount: BigInt(callData.recipientAmount),\n          deadline: BigInt(\n            Math.floor(new Date(callData.deadline).getTime() / 1000),\n          ),\n          recipient: callData.recipient,\n          recipientCurrency: callData.recipientCurrency,\n          refundDestination: callData.refundDestination,\n          feeAmount: BigInt(callData.feeAmount),\n          operator: callData.operator,\n          signature: callData.signature,\n          prefix: callData.prefix,\n        },\n      ],\n    },\n  ];\n}\n"],"names":[],"mappings":";;AAIO,SAAS,qBAAqB;AAAA,EACnC;AACF,GAA6D;AACrD,QAAA,EAAE,UAAU,SAAA,IAAa;AAExB,SAAA;AAAA,IACL;AAAA,MACE,SAAS,SAAS;AAAA,MAClB,KAAK;AAAA,MACL,cAAc,iBAAiB;AAAA,MAC/B,MAAM;AAAA,QACJ,SAAS;AAAA,QACT,OAAO,SAAS,eAAe,IAAI,OAAO,SAAS,SAAS;AAAA,MAAA;AAAA,IAEhE;AAAA,IACA;AAAA,MACE,SAAS,SAAS;AAAA,MAClB,KAAK;AAAA,MACL,cAAc,iBAAiB;AAAA,MAC/B,MAAM;AAAA,QACJ;AAAA,UACE,IAAI,SAAS;AAAA,UACb,iBAAiB,OAAO,SAAS,eAAe;AAAA,UAChD,UAAU;AAAA,YACR,KAAK,MAAM,IAAI,KAAK,SAAS,QAAQ,EAAE,QAAQ,IAAI,GAAI;AAAA,UACzD;AAAA,UACA,WAAW,SAAS;AAAA,UACpB,mBAAmB,SAAS;AAAA,UAC5B,mBAAmB,SAAS;AAAA,UAC5B,WAAW,OAAO,SAAS,SAAS;AAAA,UACpC,UAAU,SAAS;AAAA,UACnB,WAAW,SAAS;AAAA,UACpB,QAAQ,SAAS;AAAA,QAAA;AAAA,MACnB;AAAA,IACF;AAAA,EAEJ;AACF;"}