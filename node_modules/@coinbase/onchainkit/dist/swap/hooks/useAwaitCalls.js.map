{"version":3,"file":"useAwaitCalls.js","sources":["../../../src/swap/hooks/useAwaitCalls.ts"],"sourcesContent":["import { useCallback } from 'react';\nimport { waitForTransactionReceipt } from 'wagmi/actions';\nimport { useCallsStatus } from 'wagmi/experimental';\nimport type { UseAwaitCallsParams } from '../types';\nimport { normalizeStatus } from '@/internal/utils/normalizeWagmi';\n\nexport function useAwaitCalls({\n  accountConfig,\n  lifecycleStatus,\n  updateLifecycleStatus,\n}: UseAwaitCallsParams) {\n  const callsId =\n    lifecycleStatus.statusName === 'transactionApproved'\n      ? lifecycleStatus.statusData?.callsId\n      : undefined;\n\n  const { data } = useCallsStatus({\n    id: callsId || '',\n    query: {\n      refetchInterval: (query) => {\n        return normalizeStatus(query.state.data?.status) === 'success'\n          ? false\n          : 1000;\n      },\n      enabled: callsId !== undefined,\n    },\n  });\n\n  return useCallback(async () => {\n    if (normalizeStatus(data?.status) === 'success' && data?.receipts) {\n      const transactionReceipt = await waitForTransactionReceipt(\n        accountConfig,\n        {\n          confirmations: 1,\n          hash: data.receipts[data.receipts.length - 1].transactionHash,\n        },\n      );\n      updateLifecycleStatus({\n        statusName: 'success',\n        statusData: {\n          transactionReceipt,\n        },\n      });\n    }\n  }, [accountConfig, data, updateLifecycleStatus]);\n}\n"],"names":["_a"],"mappings":";;;;AAMO,SAAS,cAAc;AAAA,EAC5B;AAAA,EACA;AAAA,EACA;AACF,GAAwB;;AACtB,QAAM,UACJ,gBAAgB,eAAe,yBAC3B,qBAAgB,eAAhB,mBAA4B,UAC5B;AAEA,QAAA,EAAE,KAAK,IAAI,eAAe;AAAA,IAC9B,IAAI,WAAW;AAAA,IACf,OAAO;AAAA,MACL,iBAAiB,CAAC,UAAU;;AAC1B,eAAO,iBAAgBA,MAAA,MAAM,MAAM,SAAZ,gBAAAA,IAAkB,MAAM,MAAM,YACjD,QACA;AAAA,MACN;AAAA,MACA,SAAS,YAAY;AAAA,IAAA;AAAA,EACvB,CACD;AAED,SAAO,YAAY,YAAY;AAC7B,QAAI,gBAAgB,6BAAM,MAAM,MAAM,cAAa,6BAAM,WAAU;AACjE,YAAM,qBAAqB,MAAM;AAAA,QAC/B;AAAA,QACA;AAAA,UACE,eAAe;AAAA,UACf,MAAM,KAAK,SAAS,KAAK,SAAS,SAAS,CAAC,EAAE;AAAA,QAAA;AAAA,MAElD;AACsB,4BAAA;AAAA,QACpB,YAAY;AAAA,QACZ,YAAY;AAAA,UACV;AAAA,QAAA;AAAA,MACF,CACD;AAAA,IAAA;AAAA,EAEF,GAAA,CAAC,eAAe,MAAM,qBAAqB,CAAC;AACjD;"}