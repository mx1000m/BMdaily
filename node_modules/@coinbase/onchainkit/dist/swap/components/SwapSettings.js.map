{"version":3,"file":"SwapSettings.js","sources":["../../../src/swap/components/SwapSettings.tsx"],"sourcesContent":["import { DismissableLayer } from '@/internal/components/DismissableLayer';\nimport { FocusTrap } from '@/internal/components/FocusTrap';\nimport { Popover } from '@/internal/components/Popover';\nimport { useBreakpoints } from '@/internal/hooks/useBreakpoints';\nimport { useIcon } from '@/internal/hooks/useIcon';\nimport { background, border, cn, pressable, text } from '@/styles/theme';\nimport { useCallback, useRef, useState } from 'react';\nimport type { SwapSettingsReact } from '../types';\nimport { SwapSettingsSlippageDescription } from './SwapSettingsSlippageDescription';\nimport { SwapSettingsSlippageInput } from './SwapSettingsSlippageInput';\nimport { SwapSettingsSlippageLayout } from './SwapSettingsSlippageLayout';\nimport { SwapSettingsSlippageLayoutBottomSheet } from './SwapSettingsSlippageLayoutBottomSheet';\nimport { SwapSettingsSlippageTitle } from './SwapSettingsSlippageTitle';\n\nconst DEFAULT_CHILDREN = (\n  <>\n    <SwapSettingsSlippageTitle>Max. slippage</SwapSettingsSlippageTitle>\n    <SwapSettingsSlippageDescription>\n      Your swap will revert if the prices change by more than the selected\n      percentage.\n    </SwapSettingsSlippageDescription>\n    <SwapSettingsSlippageInput />\n  </>\n);\n\nexport function SwapSettings({\n  children = DEFAULT_CHILDREN,\n  className,\n  icon = 'swapSettings',\n  text: buttonText = '',\n}: SwapSettingsReact) {\n  const breakpoint = useBreakpoints();\n  const [isOpen, setIsOpen] = useState(false);\n  const dropdownRef = useRef<HTMLDivElement>(null);\n  const triggerRef = useRef<HTMLButtonElement>(null);\n\n  const handleToggle = useCallback((e: React.MouseEvent) => {\n    e.stopPropagation();\n    setIsOpen((prev) => !prev);\n  }, []);\n\n  const handleClose = useCallback(() => {\n    setIsOpen(false);\n  }, []);\n\n  const iconSvg = useIcon({ icon });\n\n  return (\n    <div\n      className={cn(\n        'flex w-auto items-center justify-end space-x-1 pb-4',\n        className,\n      )}\n      data-testid=\"ockSwapSettings_Settings\"\n    >\n      {buttonText && <span className={cn(text.body)}>{buttonText}</span>}\n      <div className={cn('relative', isOpen && 'group')} ref={dropdownRef}>\n        <button\n          ref={triggerRef}\n          type=\"button\"\n          aria-label=\"Toggle swap settings\"\n          className={cn(\n            pressable.default,\n            'rounded-full p-2 opacity-50 transition-opacity hover:opacity-100',\n          )}\n          onClick={handleToggle}\n        >\n          <div className=\"h-[1.125rem] w-[1.125rem]\">{iconSvg}</div>\n        </button>\n        {breakpoint === 'sm' ? (\n          <FocusTrap active={isOpen}>\n            <DismissableLayer\n              onDismiss={handleClose}\n              triggerRef={triggerRef}\n              preventTriggerEvents={true}\n            >\n              <div\n                className={cn(\n                  background.inverse,\n                  pressable.shadow,\n                  'fixed inset-x-0 z-50 transition-[bottom] duration-300 ease-in-out',\n                  isOpen ? 'bottom-0' : '-bottom-[12.875rem]',\n                  'h-[12.875rem] rounded-t-lg',\n                  className,\n                )}\n                data-testid=\"ockSwapSettingsSlippageLayoutBottomSheet_container\"\n              >\n                <SwapSettingsSlippageLayoutBottomSheet className={className}>\n                  {children}\n                </SwapSettingsSlippageLayoutBottomSheet>\n              </div>\n            </DismissableLayer>\n          </FocusTrap>\n        ) : (\n          <Popover\n            isOpen={isOpen}\n            onClose={handleClose}\n            anchor={dropdownRef.current}\n            position=\"bottom\"\n            align=\"end\"\n            trigger={triggerRef}\n          >\n            <div\n              className={cn(\n                border.radius,\n                background.default,\n                pressable.shadow,\n                'absolute right-0 z-10 mt-1 w-[21.75rem] rounded-lg',\n              )}\n              data-testid=\"ockSwapSettingsDropdown\"\n            >\n              <SwapSettingsSlippageLayout>\n                {children}\n              </SwapSettingsSlippageLayout>\n            </div>\n          </Popover>\n        )}\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAcA,MAAM,mBAEF,qBAAA,UAAA,EAAA,UAAA;AAAA,EAAA,oBAAC,6BAA0B,UAAa,gBAAA,CAAA;AAAA,EACxC,oBAAC,mCAAgC,UAGjC,mFAAA,CAAA;AAAA,sBACC,2BAA0B,CAAA,CAAA;AAAA,GAC7B;AAGK,SAAS,aAAa;AAAA,EAC3B,WAAW;AAAA,EACX;AAAA,EACA,OAAO;AAAA,EACP,MAAM,aAAa;AACrB,GAAsB;AACpB,QAAM,aAAa,eAAe;AAClC,QAAM,CAAC,QAAQ,SAAS,IAAI,SAAS,KAAK;AACpC,QAAA,cAAc,OAAuB,IAAI;AACzC,QAAA,aAAa,OAA0B,IAAI;AAE3C,QAAA,eAAe,YAAY,CAAC,MAAwB;AACxD,MAAE,gBAAgB;AACR,cAAA,CAAC,SAAS,CAAC,IAAI;AAAA,EAC3B,GAAG,EAAE;AAEC,QAAA,cAAc,YAAY,MAAM;AACpC,cAAU,KAAK;AAAA,EACjB,GAAG,EAAE;AAEL,QAAM,UAAU,QAAQ,EAAE,MAAM;AAG9B,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA;AAAA,MACF;AAAA,MACA,eAAY;AAAA,MAEX,UAAA;AAAA,QAAA,kCAAe,QAAK,EAAA,WAAW,GAAG,KAAK,IAAI,GAAI,UAAW,YAAA;AAAA,QAC3D,qBAAC,SAAI,WAAW,GAAG,YAAY,UAAU,OAAO,GAAG,KAAK,aACtD,UAAA;AAAA,UAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,KAAK;AAAA,cACL,MAAK;AAAA,cACL,cAAW;AAAA,cACX,WAAW;AAAA,gBACT,UAAU;AAAA,gBACV;AAAA,cACF;AAAA,cACA,SAAS;AAAA,cAET,UAAC,oBAAA,OAAA,EAAI,WAAU,6BAA6B,UAAQ,QAAA,CAAA;AAAA,YAAA;AAAA,UACtD;AAAA,UACC,eAAe,OACb,oBAAA,WAAA,EAAU,QAAQ,QACjB,UAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAW;AAAA,cACX;AAAA,cACA,sBAAsB;AAAA,cAEtB,UAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,WAAW;AAAA,oBACT,WAAW;AAAA,oBACX,UAAU;AAAA,oBACV;AAAA,oBACA,SAAS,aAAa;AAAA,oBACtB;AAAA,oBACA;AAAA,kBACF;AAAA,kBACA,eAAY;AAAA,kBAEZ,UAAA,oBAAC,uCAAsC,EAAA,WACpC,SACH,CAAA;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,aAEJ,IAEA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC;AAAA,cACA,SAAS;AAAA,cACT,QAAQ,YAAY;AAAA,cACpB,UAAS;AAAA,cACT,OAAM;AAAA,cACN,SAAS;AAAA,cAET,UAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC,WAAW;AAAA,oBACT,OAAO;AAAA,oBACP,WAAW;AAAA,oBACX,UAAU;AAAA,oBACV;AAAA,kBACF;AAAA,kBACA,eAAY;AAAA,kBAEZ,UAAA,oBAAC,8BACE,SACH,CAAA;AAAA,gBAAA;AAAA,cAAA;AAAA,YACF;AAAA,UAAA;AAAA,QACF,EAEJ,CAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EACF;AAEJ;"}