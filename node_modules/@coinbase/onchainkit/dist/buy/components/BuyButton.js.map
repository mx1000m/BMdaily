{"version":3,"file":"BuyButton.js","sources":["../../../src/buy/components/BuyButton.tsx"],"sourcesContent":["'use client';\nimport { useCallback, useMemo } from 'react';\nimport { Spinner } from '../../internal/components/Spinner';\nimport { checkmarkSvg } from '../../internal/svg/checkmarkSvg';\nimport { CloseSvg } from '../../internal/svg/closeSvg';\nimport {\n  background,\n  border,\n  cn,\n  color,\n  icon,\n  pressable,\n  text,\n} from '../../styles/theme';\nimport { ConnectWallet } from '../../wallet';\nimport { useBuyContext } from './BuyProvider';\n\nexport function BuyButton() {\n  const {\n    address,\n    disabled,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    from,\n    fromETH,\n    fromUSDC,\n    to,\n    lifecycleStatus: { statusName },\n    updateLifecycleStatus,\n  } = useBuyContext();\n\n  const isLoading =\n    to?.loading ||\n    from?.loading ||\n    fromETH?.loading ||\n    fromUSDC?.loading ||\n    statusName === 'transactionPending' ||\n    statusName === 'transactionApproved';\n\n  const isMissingRequiredField = !to?.amount || !to?.token;\n  const isDisabled = isLoading || disabled;\n\n  const handleSubmit = useCallback(() => {\n    if (isMissingRequiredField) {\n      updateLifecycleStatus({\n        statusName: 'error',\n        statusData: {\n          code: 'TmBPc05',\n          error: 'Missing required fields',\n          message: 'Complete the field to continue',\n        },\n      });\n      return;\n    }\n    if (isDropdownOpen) {\n      setIsDropdownOpen(false);\n      return;\n    }\n    if (!isDropdownOpen) {\n      setIsDropdownOpen(true);\n    }\n  }, [\n    isMissingRequiredField,\n    setIsDropdownOpen,\n    isDropdownOpen,\n    updateLifecycleStatus,\n  ]);\n\n  const buttonContent = useMemo(() => {\n    if (statusName === 'success') {\n      return checkmarkSvg;\n    }\n    if (isDropdownOpen) {\n      return <CloseSvg className={icon.inverse} />;\n    }\n    return 'Buy';\n  }, [statusName, isDropdownOpen]);\n\n  if (!isDisabled && !address) {\n    return <ConnectWallet text=\"Buy\" className=\"h-12 w-24 min-w-24\" />;\n  }\n\n  return (\n    <button\n      type=\"button\"\n      className={cn(\n        background.primary,\n        border.radius,\n        'flex rounded-xl',\n        'h-12 w-24 items-center justify-center px-4 py-3',\n        isDisabled && pressable.disabled,\n        text.headline,\n      )}\n      onClick={handleSubmit}\n      data-testid=\"ockBuyButton_Button\"\n      disabled={isDisabled}\n    >\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <span className={cn(text.headline, color.inverse)}>\n          {buttonContent}\n        </span>\n      )}\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiBO,SAAS,YAAY;AACpB,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA,iBAAiB,EAAE,WAAW;AAAA,IAC9B;AAAA,MACE,cAAc;AAEZ,QAAA,aACJ,yBAAI,aACJ,6BAAM,aACN,mCAAS,aACT,qCAAU,YACV,eAAe,wBACf,eAAe;AAEjB,QAAM,yBAAyB,EAAC,yBAAI,WAAU,EAAC,yBAAI;AACnD,QAAM,aAAa,aAAa;AAE1B,QAAA,eAAe,YAAY,MAAM;AACrC,QAAI,wBAAwB;AACJ,4BAAA;AAAA,QACpB,YAAY;AAAA,QACZ,YAAY;AAAA,UACV,MAAM;AAAA,UACN,OAAO;AAAA,UACP,SAAS;AAAA,QAAA;AAAA,MACX,CACD;AACD;AAAA,IAAA;AAEF,QAAI,gBAAgB;AAClB,wBAAkB,KAAK;AACvB;AAAA,IAAA;AAEF,QAAI,CAAC,gBAAgB;AACnB,wBAAkB,IAAI;AAAA,IAAA;AAAA,EACxB,GACC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAEK,QAAA,gBAAgB,QAAQ,MAAM;AAClC,QAAI,eAAe,WAAW;AACrB,aAAA;AAAA,IAAA;AAET,QAAI,gBAAgB;AAClB,aAAQ,oBAAA,UAAA,EAAS,WAAW,KAAK,QAAS,CAAA;AAAA,IAAA;AAErC,WAAA;AAAA,EAAA,GACN,CAAC,YAAY,cAAc,CAAC;AAE3B,MAAA,CAAC,cAAc,CAAC,SAAS;AAC3B,WAAQ,oBAAA,eAAA,EAAc,MAAK,OAAM,WAAU,sBAAqB;AAAA,EAAA;AAIhE,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,MAAK;AAAA,MACL,WAAW;AAAA,QACT,WAAW;AAAA,QACX,OAAO;AAAA,QACP;AAAA,QACA;AAAA,QACA,cAAc,UAAU;AAAA,QACxB,KAAK;AAAA,MACP;AAAA,MACA,SAAS;AAAA,MACT,eAAY;AAAA,MACZ,UAAU;AAAA,MAET,UACC,YAAA,oBAAC,SAAQ,CAAA,CAAA,IAER,oBAAA,QAAA,EAAK,WAAW,GAAG,KAAK,UAAU,MAAM,OAAO,GAC7C,UACH,cAAA,CAAA;AAAA,IAAA;AAAA,EAEJ;AAEJ;"}