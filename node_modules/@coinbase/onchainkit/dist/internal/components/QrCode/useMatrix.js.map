{"version":3,"file":"useMatrix.js","sources":["../../../../src/internal/components/QrCode/useMatrix.ts"],"sourcesContent":["import QRCode from 'qrcode';\nimport { useMemo } from 'react';\n\n/**\n * useMatrix generates a QR code matrix from a given value.\n * @param errorCorrectionLevel QR code error correction level (L, M, Q, H)\n * @param value String value to encode in QR code. useMatrix adds an 'ethereum:' prefix to the value as we only support EVM addresseses\n * @returns 2D array representing the QR code matrix, where 1 = black pixel and 0 = white pixel\n */\nexport function useMatrix(\n  errorCorrectionLevel: 'L' | 'M' | 'Q' | 'H',\n  value?: string | null,\n) {\n  const matrix = useMemo(() => {\n    if (!value) {\n      return [];\n    }\n\n    const transformedValue = `ethereum:${value}`;\n\n    const arr = Array.from(\n      QRCode.create(transformedValue, { errorCorrectionLevel }).modules.data,\n    );\n\n    const sqrt = Math.sqrt(arr.length);\n\n    return arr.reduce<number[][]>((rows, key, index) => {\n      if (index % sqrt === 0) {\n        rows.push([key]);\n      } else {\n        rows[rows.length - 1].push(key);\n      }\n      return rows;\n    }, []);\n  }, [errorCorrectionLevel, value]);\n  return matrix;\n}\n"],"names":[],"mappings":";;AASgB,SAAA,UACd,sBACA,OACA;AACM,QAAA,SAAS,QAAQ,MAAM;AAC3B,QAAI,CAAC,OAAO;AACV,aAAO,CAAC;AAAA,IAAA;AAGJ,UAAA,mBAAmB,YAAY,KAAK;AAE1C,UAAM,MAAM,MAAM;AAAA,MAChB,OAAO,OAAO,kBAAkB,EAAE,qBAAsB,CAAA,EAAE,QAAQ;AAAA,IACpE;AAEA,UAAM,OAAO,KAAK,KAAK,IAAI,MAAM;AAEjC,WAAO,IAAI,OAAmB,CAAC,MAAM,KAAK,UAAU;AAC9C,UAAA,QAAQ,SAAS,GAAG;AACjB,aAAA,KAAK,CAAC,GAAG,CAAC;AAAA,MAAA,OACV;AACL,aAAK,KAAK,SAAS,CAAC,EAAE,KAAK,GAAG;AAAA,MAAA;AAEzB,aAAA;AAAA,IACT,GAAG,EAAE;AAAA,EAAA,GACJ,CAAC,sBAAsB,KAAK,CAAC;AACzB,SAAA;AACT;"}