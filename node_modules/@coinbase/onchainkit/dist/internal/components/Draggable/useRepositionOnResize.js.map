{"version":3,"file":"useRepositionOnResize.js","sources":["../../../../src/internal/components/Draggable/useRepositionOnResize.ts"],"sourcesContent":["import { type Dispatch, useCallback, useEffect } from 'react';\n\nexport function useRespositionOnWindowResize(\n  draggableRef: React.RefObject<HTMLDivElement>,\n  position: { x: number; y: number },\n  resetPosition: Dispatch<\n    React.SetStateAction<{\n      x: number;\n      y: number;\n    }>\n  >,\n) {\n  const isElementInViewport = useCallback((rect: DOMRect) => {\n    return (\n      rect.right <= window.innerWidth &&\n      rect.bottom <= window.innerHeight &&\n      rect.left >= 0 &&\n      rect.top >= 0\n    );\n  }, []);\n\n  const repositionDraggable = useCallback(\n    (rect: DOMRect, currentPosition: { x: number; y: number }) => {\n      const viewportWidth = window.innerWidth;\n      const viewportHeight = window.innerHeight;\n\n      let newX: number;\n      let newY: number;\n\n      if (rect.right > viewportWidth) {\n        newX = viewportWidth - rect.width - 10;\n      } else if (rect.left < 0) {\n        newX = 10;\n      } else {\n        newX = currentPosition.x;\n      }\n\n      if (rect.bottom > viewportHeight) {\n        newY = viewportHeight - rect.height - 10;\n      } else if (rect.top < 0) {\n        newY = 10;\n      } else {\n        newY = currentPosition.y;\n      }\n\n      return { x: newX, y: newY };\n    },\n    [],\n  );\n\n  const handleWindowResize = useCallback(() => {\n    if (!draggableRef.current) {\n      return;\n    }\n\n    const el = draggableRef.current;\n    const rect = el.getBoundingClientRect();\n\n    const newPosition = repositionDraggable(rect, position);\n\n    resetPosition((currentPos) =>\n      isElementInViewport(rect) ? currentPos : newPosition,\n    );\n  }, [\n    draggableRef,\n    position,\n    repositionDraggable,\n    resetPosition,\n    isElementInViewport,\n  ]);\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, [handleWindowResize]);\n}\n"],"names":[],"mappings":";AAEgB,SAAA,6BACd,cACA,UACA,eAMA;AACM,QAAA,sBAAsB,YAAY,CAAC,SAAkB;AACzD,WACE,KAAK,SAAS,OAAO,cACrB,KAAK,UAAU,OAAO,eACtB,KAAK,QAAQ,KACb,KAAK,OAAO;AAAA,EAEhB,GAAG,EAAE;AAEL,QAAM,sBAAsB;AAAA,IAC1B,CAAC,MAAe,oBAA8C;AAC5D,YAAM,gBAAgB,OAAO;AAC7B,YAAM,iBAAiB,OAAO;AAE1B,UAAA;AACA,UAAA;AAEA,UAAA,KAAK,QAAQ,eAAe;AACvB,eAAA,gBAAgB,KAAK,QAAQ;AAAA,MAAA,WAC3B,KAAK,OAAO,GAAG;AACjB,eAAA;AAAA,MAAA,OACF;AACL,eAAO,gBAAgB;AAAA,MAAA;AAGrB,UAAA,KAAK,SAAS,gBAAgB;AACzB,eAAA,iBAAiB,KAAK,SAAS;AAAA,MAAA,WAC7B,KAAK,MAAM,GAAG;AAChB,eAAA;AAAA,MAAA,OACF;AACL,eAAO,gBAAgB;AAAA,MAAA;AAGzB,aAAO,EAAE,GAAG,MAAM,GAAG,KAAK;AAAA,IAC5B;AAAA,IACA,CAAA;AAAA,EACF;AAEM,QAAA,qBAAqB,YAAY,MAAM;AACvC,QAAA,CAAC,aAAa,SAAS;AACzB;AAAA,IAAA;AAGF,UAAM,KAAK,aAAa;AAClB,UAAA,OAAO,GAAG,sBAAsB;AAEhC,UAAA,cAAc,oBAAoB,MAAM,QAAQ;AAEtD;AAAA,MAAc,CAAC,eACb,oBAAoB,IAAI,IAAI,aAAa;AAAA,IAC3C;AAAA,EAAA,GACC;AAAA,IACD;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,EAAA,CACD;AAED,YAAU,MAAM;AACP,WAAA,iBAAiB,UAAU,kBAAkB;AACpD,WAAO,MAAM,OAAO,oBAAoB,UAAU,kBAAkB;AAAA,EAAA,GACnE,CAAC,kBAAkB,CAAC;AACzB;"}