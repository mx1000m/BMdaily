{"version":3,"file":"WalletDropdownContent.js","sources":["../../../src/wallet/components/WalletDropdownContent.tsx"],"sourcesContent":["import { BottomSheet } from '@/internal/components/BottomSheet';\nimport { zIndex } from '@/styles/constants';\nimport { background, border, cn, text } from '@/styles/theme';\nimport { useCallback, useMemo } from 'react';\nimport { WALLET_ADVANCED_DEFAULT_SWAPPABLE_TOKENS } from '../constants';\nimport type { WalletAdvancedReact } from '../types';\nimport { WalletAdvancedQrReceive } from './WalletAdvancedQrReceive';\nimport { WalletAdvancedSwap } from './WalletAdvancedSwap';\nimport { useWalletContext } from './WalletProvider';\nimport { Send } from './wallet-advanced-send/components/Send';\nimport { RequestContext } from '@/core/network/constants';\nimport { usePortfolio } from '@/wallet/hooks/usePortfolio';\nimport { useAccount } from 'wagmi';\n\nexport function WalletDropdownContent({\n  children,\n  swappableTokens,\n  classNames,\n}: WalletAdvancedReact) {\n  const {\n    isSubComponentOpen,\n    setIsSubComponentOpen,\n    isSubComponentClosing,\n    setIsSubComponentClosing,\n    connectRef,\n    breakpoint,\n    activeFeature,\n    animations,\n  } = useWalletContext();\n\n  const { address } = useAccount();\n  const { data: portfolioData } = usePortfolio(\n    { address, enabled: Boolean(activeFeature) },\n    RequestContext.Wallet,\n  );\n  const tokenBalances = portfolioData?.tokenBalances;\n\n  const handleBottomSheetClose = useCallback(() => {\n    setIsSubComponentOpen(false);\n  }, [setIsSubComponentOpen]);\n\n  const handleAnimationEnd = useCallback(() => {\n    if (isSubComponentClosing) {\n      setIsSubComponentOpen(false);\n      setIsSubComponentClosing(false);\n    }\n  }, [isSubComponentClosing, setIsSubComponentOpen, setIsSubComponentClosing]);\n\n  const content = useMemo(() => {\n    if (activeFeature === 'send') {\n      return (\n        <ContentWrapper>\n          <Send className=\"border-none\" />\n        </ContentWrapper>\n      );\n    }\n\n    if (activeFeature === 'qr') {\n      return (\n        <ContentWrapper>\n          <WalletAdvancedQrReceive classNames={classNames?.qr} />\n        </ContentWrapper>\n      );\n    }\n\n    if (activeFeature === 'swap') {\n      return (\n        <ContentWrapper>\n          <WalletAdvancedSwap\n            title={\n              <div\n                className={cn(text.headline, 'w-full text-center text-base')}\n              >\n                Swap\n              </div>\n            }\n            to={swappableTokens ?? WALLET_ADVANCED_DEFAULT_SWAPPABLE_TOKENS}\n            from={\n              tokenBalances?.map((token) => ({\n                address: token.address,\n                chainId: token.chainId,\n                symbol: token.symbol,\n                decimals: token.decimals,\n                image: token.image,\n                name: token.name,\n              })) ?? []\n            }\n            classNames={classNames?.swap}\n          />\n        </ContentWrapper>\n      );\n    }\n\n    return <ContentWrapper>{children}</ContentWrapper>;\n  }, [activeFeature, swappableTokens, tokenBalances, children, classNames]);\n\n  if (breakpoint === 'sm') {\n    return (\n      <BottomSheet\n        isOpen={isSubComponentOpen}\n        triggerRef={connectRef}\n        onClose={handleBottomSheetClose}\n        className={classNames?.container}\n      >\n        <div className=\"flex h-full w-full flex-col items-center justify-center\">\n          {content}\n        </div>\n      </BottomSheet>\n    );\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletDropdownContent\"\n      className={cn(\n        background.default,\n        border.radius,\n        border.lineDefault,\n        zIndex.dropdown,\n        'my-1.5 h-auto w-full',\n        'flex justify-center',\n        // ensure border radius is respected\n        'overflow-hidden',\n        animations.container,\n        classNames?.container,\n      )}\n      onAnimationEnd={handleAnimationEnd}\n    >\n      {content}\n    </div>\n  );\n}\n\nfunction ContentWrapper({\n  children,\n  className,\n}: {\n  children: React.ReactNode;\n  className?: string;\n}) {\n  return (\n    <div\n      className={cn(\n        'flex flex-col justify-between',\n        'min-w-80 max-h-120',\n        className,\n      )}\n    >\n      {children}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAcO,SAAS,sBAAsB;AAAA,EACpC;AAAA,EACA;AAAA,EACA;AACF,GAAwB;AAChB,QAAA;AAAA,IACJ;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,IACA;AAAA,MACE,iBAAiB;AAEf,QAAA,EAAE,QAAQ,IAAI,WAAW;AACzB,QAAA,EAAE,MAAM,cAAA,IAAkB;AAAA,IAC9B,EAAE,SAAS,SAAS,QAAQ,aAAa,EAAE;AAAA,IAC3C,eAAe;AAAA,EACjB;AACA,QAAM,gBAAgB,+CAAe;AAE/B,QAAA,yBAAyB,YAAY,MAAM;AAC/C,0BAAsB,KAAK;AAAA,EAAA,GAC1B,CAAC,qBAAqB,CAAC;AAEpB,QAAA,qBAAqB,YAAY,MAAM;AAC3C,QAAI,uBAAuB;AACzB,4BAAsB,KAAK;AAC3B,+BAAyB,KAAK;AAAA,IAAA;AAAA,EAE/B,GAAA,CAAC,uBAAuB,uBAAuB,wBAAwB,CAAC;AAErE,QAAA,UAAU,QAAQ,MAAM;AAC5B,QAAI,kBAAkB,QAAQ;AAC5B,iCACG,gBACC,EAAA,UAAA,oBAAC,MAAK,EAAA,WAAU,cAAc,CAAA,GAChC;AAAA,IAAA;AAIJ,QAAI,kBAAkB,MAAM;AAC1B,iCACG,gBACC,EAAA,UAAA,oBAAC,2BAAwB,YAAY,yCAAY,IAAI,EACvD,CAAA;AAAA,IAAA;AAIJ,QAAI,kBAAkB,QAAQ;AAC5B,iCACG,gBACC,EAAA,UAAA;AAAA,QAAC;AAAA,QAAA;AAAA,UACC,OACE;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,WAAW,GAAG,KAAK,UAAU,8BAA8B;AAAA,cAC5D,UAAA;AAAA,YAAA;AAAA,UAED;AAAA,UAEF,IAAI,mBAAmB;AAAA,UACvB,OACE,+CAAe,IAAI,CAAC,WAAW;AAAA,YAC7B,SAAS,MAAM;AAAA,YACf,SAAS,MAAM;AAAA,YACf,QAAQ,MAAM;AAAA,YACd,UAAU,MAAM;AAAA,YAChB,OAAO,MAAM;AAAA,YACb,MAAM,MAAM;AAAA,UACd,QAAO,CAAC;AAAA,UAEV,YAAY,yCAAY;AAAA,QAAA;AAAA,MAAA,GAE5B;AAAA,IAAA;AAIG,WAAA,oBAAC,kBAAgB,UAAS;AAAA,EAAA,GAChC,CAAC,eAAe,iBAAiB,eAAe,UAAU,UAAU,CAAC;AAExE,MAAI,eAAe,MAAM;AAErB,WAAA;AAAA,MAAC;AAAA,MAAA;AAAA,QACC,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,WAAW,yCAAY;AAAA,QAEvB,UAAC,oBAAA,OAAA,EAAI,WAAU,2DACZ,UACH,QAAA,CAAA;AAAA,MAAA;AAAA,IACF;AAAA,EAAA;AAKF,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,WAAW;AAAA,QACT,WAAW;AAAA,QACX,OAAO;AAAA,QACP,OAAO;AAAA,QACP,OAAO;AAAA,QACP;AAAA,QACA;AAAA;AAAA,QAEA;AAAA,QACA,WAAW;AAAA,QACX,yCAAY;AAAA,MACd;AAAA,MACA,gBAAgB;AAAA,MAEf,UAAA;AAAA,IAAA;AAAA,EACH;AAEJ;AAEA,SAAS,eAAe;AAAA,EACtB;AAAA,EACA;AACF,GAGG;AAEC,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW;AAAA,QACT;AAAA,QACA;AAAA,QACA;AAAA,MACF;AAAA,MAEC;AAAA,IAAA;AAAA,EACH;AAEJ;"}