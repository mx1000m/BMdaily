{"version":3,"file":"WalletAdvancedAddressDetails.js","sources":["../../../src/wallet/components/WalletAdvancedAddressDetails.tsx"],"sourcesContent":["'use client';\n\nimport { Avatar, Name } from '@/identity';\nimport { Spinner } from '@/internal/components/Spinner';\nimport { zIndex } from '@/styles/constants';\nimport { border, cn, color, pressable, text } from '@/styles/theme';\nimport { useCallback, useState } from 'react';\nimport { useWalletContext } from './WalletProvider';\nimport { usePortfolio } from '../hooks/usePortfolio';\nimport { RequestContext } from '@/core/network/constants';\nimport { useAccount } from 'wagmi';\n\ntype WalletAdvancedAddressDetailsProps = {\n  classNames?: {\n    container?: string;\n    avatar?: string;\n    nameButton?: string;\n    fiatBalance?: string;\n  };\n};\n\nexport function WalletAdvancedAddressDetails({\n  classNames,\n}: WalletAdvancedAddressDetailsProps) {\n  const { address, chain, animations } = useWalletContext();\n  const [copyText, setCopyText] = useState('Copy');\n\n  const handleCopyAddress = useCallback(async () => {\n    try {\n      await navigator.clipboard.writeText(String(address));\n      setCopyText('Copied');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    } catch (err) {\n      console.error('Failed to copy address:', err);\n      setCopyText('Failed to copy');\n      setTimeout(() => setCopyText('Copy'), 2000);\n    }\n  }, [address]);\n\n  if (!address || !chain) {\n    return <div className=\"mt-1 h-28 w-10 px-4 py-3\" />; // Prevent layout shift\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletAdvanced_AddressDetails\"\n      className={cn(\n        'mt-2 flex w-88 flex-col items-center justify-center px-4 py-3',\n        color.foreground,\n        text.body,\n        animations.content,\n        classNames?.container,\n      )}\n    >\n      <Avatar\n        address={address}\n        chain={chain}\n        className={cn('pointer-events-none h-10 w-10', classNames?.avatar)}\n      />\n      <div className=\"group relative mt-2 text-base\">\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          data-testid=\"ockWalletAdvanced_NameButton\"\n        >\n          <Name\n            address={address}\n            chain={chain}\n            className={cn(\n              'hover:text-[var(--ock-text-foreground-muted)] active:text-[var(--ock-text-primary)]',\n              classNames?.nameButton,\n            )}\n          />\n        </button>\n        <button\n          type=\"button\"\n          onClick={handleCopyAddress}\n          className={cn(\n            pressable.alternate,\n            text.legal,\n            color.foreground,\n            border.default,\n            border.radius,\n            zIndex.tooltip,\n            'absolute top-full right-0 mt-0.5 px-1.5 py-0.5 opacity-0 transition-opacity group-hover:opacity-100',\n          )}\n          aria-live=\"polite\"\n          data-testid=\"ockWalletAdvanced_NameTooltip\"\n        >\n          {copyText}\n        </button>\n      </div>\n      <AddressBalanceInFiat className={classNames?.fiatBalance} />\n    </div>\n  );\n}\n\nfunction AddressBalanceInFiat({ className }: { className?: string }) {\n  const { address } = useAccount();\n\n  const { data: portfolioData, isFetching: isFetchingPortfolioData } =\n    usePortfolio({ address }, RequestContext.Wallet);\n\n  const portfolioFiatValue = portfolioData?.portfolioBalanceInUsd;\n\n  const formattedValueInFiat = new Intl.NumberFormat('en-US', {\n    style: 'currency',\n    currency: 'USD',\n  }).format(Number(portfolioFiatValue));\n\n  if (isFetchingPortfolioData) {\n    return (\n      <div className=\"mt-1 h-8 w-full\">\n        <Spinner />\n      </div>\n    );\n  }\n\n  if (portfolioFiatValue === null || portfolioFiatValue === undefined) {\n    return null;\n  }\n\n  return (\n    <div\n      className={cn(text.title1, 'mt-1 font-normal', className)}\n      data-testid=\"ockWalletAdvanced_AddressBalance\"\n    >\n      {formattedValueInFiat}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AAqBO,SAAS,6BAA6B;AAAA,EAC3C;AACF,GAAsC;AACpC,QAAM,EAAE,SAAS,OAAO,WAAA,IAAe,iBAAiB;AACxD,QAAM,CAAC,UAAU,WAAW,IAAI,SAAS,MAAM;AAEzC,QAAA,oBAAoB,YAAY,YAAY;AAC5C,QAAA;AACF,YAAM,UAAU,UAAU,UAAU,OAAO,OAAO,CAAC;AACnD,kBAAY,QAAQ;AACpB,iBAAW,MAAM,YAAY,MAAM,GAAG,GAAI;AAAA,aACnC,KAAK;AACJ,cAAA,MAAM,2BAA2B,GAAG;AAC5C,kBAAY,gBAAgB;AAC5B,iBAAW,MAAM,YAAY,MAAM,GAAG,GAAI;AAAA,IAAA;AAAA,EAC5C,GACC,CAAC,OAAO,CAAC;AAER,MAAA,CAAC,WAAW,CAAC,OAAO;AACf,WAAA,oBAAC,OAAI,EAAA,WAAU,2BAA2B,CAAA;AAAA,EAAA;AAIjD,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,eAAY;AAAA,MACZ,WAAW;AAAA,QACT;AAAA,QACA,MAAM;AAAA,QACN,KAAK;AAAA,QACL,WAAW;AAAA,QACX,yCAAY;AAAA,MACd;AAAA,MAEA,UAAA;AAAA,QAAA;AAAA,UAAC;AAAA,UAAA;AAAA,YACC;AAAA,YACA;AAAA,YACA,WAAW,GAAG,iCAAiC,yCAAY,MAAM;AAAA,UAAA;AAAA,QACnE;AAAA,QACA,qBAAC,OAAI,EAAA,WAAU,iCACb,UAAA;AAAA,UAAA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS;AAAA,cACT,eAAY;AAAA,cAEZ,UAAA;AAAA,gBAAC;AAAA,gBAAA;AAAA,kBACC;AAAA,kBACA;AAAA,kBACA,WAAW;AAAA,oBACT;AAAA,oBACA,yCAAY;AAAA,kBAAA;AAAA,gBACd;AAAA,cAAA;AAAA,YACF;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA,YAAA;AAAA,cACC,MAAK;AAAA,cACL,SAAS;AAAA,cACT,WAAW;AAAA,gBACT,UAAU;AAAA,gBACV,KAAK;AAAA,gBACL,MAAM;AAAA,gBACN,OAAO;AAAA,gBACP,OAAO;AAAA,gBACP,OAAO;AAAA,gBACP;AAAA,cACF;AAAA,cACA,aAAU;AAAA,cACV,eAAY;AAAA,cAEX,UAAA;AAAA,YAAA;AAAA,UAAA;AAAA,QACH,GACF;AAAA,QACC,oBAAA,sBAAA,EAAqB,WAAW,yCAAY,YAAa,CAAA;AAAA,MAAA;AAAA,IAAA;AAAA,EAC5D;AAEJ;AAEA,SAAS,qBAAqB,EAAE,aAAqC;AAC7D,QAAA,EAAE,QAAQ,IAAI,WAAW;AAEzB,QAAA,EAAE,MAAM,eAAe,YAAY,wBAAA,IACvC,aAAa,EAAE,QAAA,GAAW,eAAe,MAAM;AAEjD,QAAM,qBAAqB,+CAAe;AAE1C,QAAM,uBAAuB,IAAI,KAAK,aAAa,SAAS;AAAA,IAC1D,OAAO;AAAA,IACP,UAAU;AAAA,EACX,CAAA,EAAE,OAAO,OAAO,kBAAkB,CAAC;AAEpC,MAAI,yBAAyB;AAC3B,+BACG,OAAI,EAAA,WAAU,mBACb,UAAA,oBAAC,UAAQ,CAAA,GACX;AAAA,EAAA;AAIA,MAAA,uBAAuB,QAAQ,uBAAuB,QAAW;AAC5D,WAAA;AAAA,EAAA;AAIP,SAAA;AAAA,IAAC;AAAA,IAAA;AAAA,MACC,WAAW,GAAG,KAAK,QAAQ,oBAAoB,SAAS;AAAA,MACxD,eAAY;AAAA,MAEX,UAAA;AAAA,IAAA;AAAA,EACH;AAEJ;"}