{"version":3,"file":"WalletAdvancedTransactionActions.js","sources":["../../../src/wallet/components/WalletAdvancedTransactionActions.tsx"],"sourcesContent":["'use client';\n\nimport { useAnalytics } from '@/core/analytics/hooks/useAnalytics';\nimport { WalletEvent, WalletOption } from '@/core/analytics/types';\nimport { Skeleton } from '@/internal/components/Skeleton';\nimport { addSvgForeground } from '@/internal/svg/addForegroundSvg';\nimport { arrowUpRightSvg } from '@/internal/svg/arrowUpRightSvg';\nimport { toggleSvg } from '@/internal/svg/toggleSvg';\nimport { border, cn, color, pressable, text } from '@/styles/theme';\nimport { useOnchainKit } from '@/useOnchainKit';\nimport { useCallback } from 'react';\nimport { useWalletContext } from './WalletProvider';\nimport { RequestContext } from '@/core/network/constants';\nimport { usePortfolio } from '../hooks/usePortfolio';\n\ntype WalletAdvancedTransactionActionProps = {\n  icon: React.ReactNode;\n  label: string;\n  action: () => void;\n  classNames?: {\n    container?: string;\n    icon?: string;\n    label?: string;\n  };\n};\n\ntype WalletAdvancedTransactionActionsProps = {\n  classNames?: {\n    container?: string;\n    leftAction?: WalletAdvancedTransactionActionProps['classNames'];\n    middleAction?: WalletAdvancedTransactionActionProps['classNames'];\n    rightAction?: WalletAdvancedTransactionActionProps['classNames'];\n  };\n};\n\nexport function WalletAdvancedTransactionActions({\n  classNames,\n}: WalletAdvancedTransactionActionsProps) {\n  const { address, chain, setActiveFeature, animations } = useWalletContext();\n  const { projectId } = useOnchainKit();\n  const { sendAnalytics } = useAnalytics();\n\n  const { isFetching: isFetchingPortfolioData } = usePortfolio(\n    { address },\n    RequestContext.Wallet,\n  );\n\n  const handleAnalyticsOptionSelected = useCallback(\n    (option: WalletOption) => {\n      sendAnalytics(WalletEvent.OptionSelected, {\n        option,\n      });\n    },\n    [sendAnalytics],\n  );\n\n  const handleBuy = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Buy);\n\n    if (!projectId || !address || !chain?.name) {\n      return;\n    }\n\n    const url = new URL('https://pay.coinbase.com/buy/select-asset');\n    const params = new URLSearchParams({\n      appId: projectId,\n      destinationWallets: JSON.stringify([\n        {\n          address,\n          blockchains: [chain.name.toLowerCase()],\n        },\n      ]),\n      defaultAsset: 'USDC',\n      defaultPaymentMethod: 'CRYPTO_ACCOUNT',\n      presetFiatAmount: '25',\n    });\n\n    window.open(\n      `${url}?${params}`,\n      'popup',\n      'width=400,height=600,scrollbars=yes',\n    );\n  }, [address, chain?.name, projectId, handleAnalyticsOptionSelected]);\n\n  const handleSend = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Send);\n    setActiveFeature('send');\n  }, [handleAnalyticsOptionSelected, setActiveFeature]);\n\n  const handleSwap = useCallback(() => {\n    handleAnalyticsOptionSelected(WalletOption.Swap);\n    setActiveFeature('swap');\n  }, [setActiveFeature, handleAnalyticsOptionSelected]);\n\n  if (isFetchingPortfolioData) {\n    return <Skeleton className=\"mx-auto my-3 h-16 w-80 px-4 py-3\" />;\n  }\n\n  return (\n    <div\n      data-testid=\"ockWalletAdvanced_TransactionActions\"\n      className={cn(\n        'my-3 flex w-88 flex-row justify-between gap-2 px-4 py-3',\n        animations.content,\n        classNames?.container,\n      )}\n    >\n      <WalletAdvancedTransactionAction\n        icon={addSvgForeground}\n        label=\"Buy\"\n        action={handleBuy}\n        classNames={classNames?.leftAction}\n      />\n      <WalletAdvancedTransactionAction\n        icon={arrowUpRightSvg}\n        label=\"Send\"\n        action={handleSend}\n        classNames={classNames?.middleAction}\n      />\n      <WalletAdvancedTransactionAction\n        icon={toggleSvg}\n        label=\"Swap\"\n        action={handleSwap}\n        classNames={classNames?.rightAction}\n      />\n    </div>\n  );\n}\n\nfunction WalletAdvancedTransactionAction({\n  icon,\n  label,\n  action,\n  classNames,\n}: WalletAdvancedTransactionActionProps) {\n  return (\n    <button\n      type=\"button\"\n      className={cn(\n        'flex flex-col items-center justify-center gap-2 pt-2.5 pb-2',\n        'h-16 flex-1',\n        border.radius,\n        pressable.alternate,\n        classNames?.container,\n      )}\n      onClick={action}\n      aria-label={label}\n    >\n      <span\n        className={cn(\n          'flex h-4 w-4 flex-col items-center justify-center',\n          classNames?.icon,\n        )}\n      >\n        {icon}\n      </span>\n      <span\n        className={cn(\n          text.label2,\n          color.foreground,\n          'flex flex-col justify-center',\n          classNames?.label,\n        )}\n      >\n        {label}\n      </span>\n    </button>\n  );\n}\n"],"names":[],"mappings":"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"}