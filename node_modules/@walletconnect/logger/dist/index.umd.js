(function(h,d){typeof exports=="object"&&typeof module<"u"?d(exports):typeof define=="function"&&define.amd?define(["exports"],d):(h=typeof globalThis<"u"?globalThis:h||self,d(h["@walletconnect/logger"]={}))})(this,function(h){"use strict";var d={exports:{}};function ie(e){try{return JSON.stringify(e)}catch{return'"[Circular]"'}}var oe=le;function le(e,t,n){var s=n&&n.stringify||ie,i=1;if(typeof e=="object"&&e!==null){var f=t.length+i;if(f===1)return e;var g=new Array(f);g[0]=s(e);for(var u=1;u<f;u++)g[u]=s(t[u]);return g.join(" ")}if(typeof e!="string")return e;var c=t.length;if(c===0)return e;for(var r="",o=1-i,l=-1,O=e&&e.length||0,a=0;a<O;){if(e.charCodeAt(a)===37&&a+1<O){switch(l=l>-1?l:0,e.charCodeAt(a+1)){case 100:case 102:if(o>=c||t[o]==null)break;l<a&&(r+=e.slice(l,a)),r+=Number(t[o]),l=a+2,a++;break;case 105:if(o>=c||t[o]==null)break;l<a&&(r+=e.slice(l,a)),r+=Math.floor(Number(t[o])),l=a+2,a++;break;case 79:case 111:case 106:if(o>=c||t[o]===void 0)break;l<a&&(r+=e.slice(l,a));var j=typeof t[o];if(j==="string"){r+="'"+t[o]+"'",l=a+2,a++;break}if(j==="function"){r+=t[o].name||"<anonymous>",l=a+2,a++;break}r+=s(t[o]),l=a+2,a++;break;case 115:if(o>=c)break;l<a&&(r+=e.slice(l,a)),r+=String(t[o]),l=a+2,a++;break;case 37:l<a&&(r+=e.slice(l,a)),r+="%",l=a+2,a++,o--;break}++o}++a}return l===-1?e:(l<O&&(r+=e.slice(l)),r)}const M=oe;d.exports=v;const _=we().console||{},ae={mapHttpRequest:C,mapHttpResponse:C,wrapRequestSerializer:F,wrapResponseSerializer:F,wrapErrorSerializer:F,req:C,res:C,err:G,errWithCause:G};function y(e,t){return e==="silent"?1/0:t.levels.values[e]}const P=Symbol("pino.logFuncs"),N=Symbol("pino.hierarchy"),ue={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function D(e,t){const n={logger:t,parent:e[N]};t[N]=n}function ce(e,t,n){const s={};t.forEach(i=>{s[i]=n[i]?n[i]:_[i]||_[ue[i]||"log"]||w}),e[P]=s}function fe(e,t){return Array.isArray(e)?e.filter(function(s){return s!=="!stdSerializers.err"}):e===!0?Object.keys(t):!1}function v(e){e=e||{},e.browser=e.browser||{};const t=e.browser.transmit;if(t&&typeof t.send!="function")throw Error("pino: transmit option must have a send function");const n=e.browser.write||_;e.browser.write&&(e.browser.asObject=!0);const s=e.serializers||{},i=fe(e.browser.serialize,s);let f=e.browser.serialize;Array.isArray(e.browser.serialize)&&e.browser.serialize.indexOf("!stdSerializers.err")>-1&&(f=!1);const g=Object.keys(e.customLevels||{}),u=["error","fatal","warn","info","debug","trace"].concat(g);typeof n=="function"&&u.forEach(function(b){n[b]=n}),(e.enabled===!1||e.browser.disabled)&&(e.level="silent");const c=e.level||"info",r=Object.create(n);r.log||(r.log=w),ce(r,u,n),D({},r),Object.defineProperty(r,"levelVal",{get:l}),Object.defineProperty(r,"level",{get:O,set:a});const o={transmit:t,serialize:i,asObject:e.browser.asObject,asObjectBindingsOnly:e.browser.asObjectBindingsOnly,formatters:e.browser.formatters,levels:u,timestamp:Le(e),messageKey:e.messageKey||"msg",onChild:e.onChild||w};r.levels=he(e),r.level=c,r.isLevelEnabled=function(b){return this.levels.values[b]?this.levels.values[b]>=this.levels.values[this.level]:!1},r.setMaxListeners=r.getMaxListeners=r.emit=r.addListener=r.on=r.prependListener=r.once=r.prependOnceListener=r.removeListener=r.removeAllListeners=r.listeners=r.listenerCount=r.eventNames=r.write=r.flush=w,r.serializers=s,r._serialize=i,r._stdErrSerialize=f,r.child=function(...b){return j.call(this,o,...b)},t&&(r._logEvent=$());function l(){return y(this.level,this)}function O(){return this._level}function a(b){if(b!=="silent"&&!this.levels.values[b])throw Error("unknown level "+b);this._level=b,p(this,o,r,"error"),p(this,o,r,"fatal"),p(this,o,r,"warn"),p(this,o,r,"info"),p(this,o,r,"debug"),p(this,o,r,"trace"),g.forEach(m=>{p(this,o,r,m)})}function j(b,m,z){if(!m)throw new Error("missing bindings for child Pino");z=z||{},i&&m.serializers&&(z.serializers=m.serializers);const ne=z.serializers;if(i&&ne){var A=Object.assign({},s,ne),re=e.browser.serialize===!0?Object.keys(A):i;delete m.serializers,V([m],re,A,this._stdErrSerialize)}function se(x){this._childLevel=(x._childLevel|0)+1,this.bindings=m,A&&(this.serializers=A,this._serialize=re),t&&(this._logEvent=$([].concat(x._logEvent.bindings,m)))}se.prototype=this;const E=new se(this);return D(this,E),E.child=function(...x){return j.call(this,b,...x)},E.level=z.level||this.level,b.onChild(E),E}return r}function he(e){const t=e.customLevels||{},n=Object.assign({},v.levels.values,t),s=Object.assign({},v.levels.labels,ge(t));return{values:n,labels:s}}function ge(e){const t={};return Object.keys(e).forEach(function(n){t[e[n]]=n}),t}v.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},v.stdSerializers=ae,v.stdTimeFunctions=Object.assign({},{nullTime:U,epochTime:R,unixTime:pe,isoTime:Oe});function de(e){const t=[];e.bindings&&t.push(e.bindings);let n=e[N];for(;n.parent;)n=n.parent,n.logger.bindings&&t.push(n.logger.bindings);return t.reverse()}function p(e,t,n,s){if(Object.defineProperty(e,s,{value:y(e.level,n)>y(s,n)?w:n[P][s],writable:!0,enumerable:!0,configurable:!0}),e[s]===w){if(!t.transmit)return;const f=t.transmit.level||e.level,g=y(f,n);if(y(s,n)<g)return}e[s]=ve(e,t,n,s);const i=de(e);i.length!==0&&(e[s]=be(i,e[s]))}function be(e,t){return function(){return t.apply(this,[...e,...arguments])}}function ve(e,t,n,s){return function(i){return function(){const g=t.timestamp(),u=new Array(arguments.length),c=Object.getPrototypeOf&&Object.getPrototypeOf(this)===_?_:this;for(var r=0;r<u.length;r++)u[r]=arguments[r];var o=!1;if(t.serialize&&(V(u,this._serialize,this.serializers,this._stdErrSerialize),o=!0),t.asObject||t.formatters?i.call(c,...me(this,s,u,g,t)):i.apply(c,u),t.transmit){const l=t.transmit.level||e._level,O=y(l,n),a=y(s,n);if(a<O)return;ye(this,{ts:g,methodLevel:s,methodValue:a,transmitLevel:l,transmitValue:n.levels.values[t.transmit.level||e._level],send:t.transmit.send,val:y(e._level,n)},u,o)}}}(e[P][s])}function me(e,t,n,s,i){const{level:f,log:g=l=>l}=i.formatters||{},u=n.slice();let c=u[0];const r={};let o=(e._childLevel|0)+1;if(o<1&&(o=1),s&&(r.time=s),f){const l=f(t,e.levels.values[t]);Object.assign(r,l)}else r.level=e.levels.values[t];if(i.asObjectBindingsOnly){if(c!==null&&typeof c=="object")for(;o--&&typeof u[0]=="object";)Object.assign(r,u.shift());return[g(r),...u]}else{if(c!==null&&typeof c=="object"){for(;o--&&typeof u[0]=="object";)Object.assign(r,u.shift());c=u.length?M(u.shift(),u):void 0}else typeof c=="string"&&(c=M(u.shift(),u));return c!==void 0&&(r[i.messageKey]=c),[g(r)]}}function V(e,t,n,s){for(const i in e)if(s&&e[i]instanceof Error)e[i]=v.stdSerializers.err(e[i]);else if(typeof e[i]=="object"&&!Array.isArray(e[i])&&t)for(const f in e[i])t.indexOf(f)>-1&&f in n&&(e[i][f]=n[f](e[i][f]))}function ye(e,t,n,s=!1){const i=t.send,f=t.ts,g=t.methodLevel,u=t.methodValue,c=t.val,r=e._logEvent.bindings;s||V(n,e._serialize||Object.keys(e.serializers),e.serializers,e._stdErrSerialize===void 0?!0:e._stdErrSerialize),e._logEvent.ts=f,e._logEvent.messages=n.filter(function(o){return r.indexOf(o)===-1}),e._logEvent.level.label=g,e._logEvent.level.value=u,i(g,e._logEvent,c),e._logEvent=$(r)}function $(e){return{ts:0,messages:[],bindings:e||[],level:{label:"",value:0}}}function G(e){const t={type:e.constructor.name,msg:e.message,stack:e.stack};for(const n in e)t[n]===void 0&&(t[n]=e[n]);return t}function Le(e){return typeof e.timestamp=="function"?e.timestamp:e.timestamp===!1?U:R}function C(){return{}}function F(e){return e}function w(){}function U(){return!1}function R(){return Date.now()}function pe(){return Math.round(Date.now()/1e3)}function Oe(){return new Date(Date.now()).toISOString()}function we(){function e(t){return typeof t<"u"&&t}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return e(self)||e(window)||e(this)||{}}}d.exports.default=v;var _e=d.exports.pino=v;const X={level:"info"},S="custom_context",k=1e3*1024;var Se=Object.defineProperty,je=(e,t,n)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,L=(e,t,n)=>je(e,typeof t!="symbol"?t+"":t,n);class ze{constructor(t){L(this,"nodeValue"),L(this,"sizeInBytes"),L(this,"next"),this.nodeValue=t,this.sizeInBytes=new TextEncoder().encode(this.nodeValue).length,this.next=null}get value(){return this.nodeValue}get size(){return this.sizeInBytes}}class Y{constructor(t){L(this,"lengthInNodes"),L(this,"sizeInBytes"),L(this,"head"),L(this,"tail"),L(this,"maxSizeInBytes"),this.head=null,this.tail=null,this.lengthInNodes=0,this.maxSizeInBytes=t,this.sizeInBytes=0}append(t){const n=new ze(t);if(n.size>this.maxSizeInBytes)throw new Error(`[LinkedList] Value too big to insert into list: ${t} with size ${n.size}`);for(;this.size+n.size>this.maxSizeInBytes;)this.shift();this.head?(this.tail&&(this.tail.next=n),this.tail=n):(this.head=n,this.tail=n),this.lengthInNodes++,this.sizeInBytes+=n.size}shift(){if(!this.head)return;const t=this.head;this.head=this.head.next,this.head||(this.tail=null),this.lengthInNodes--,this.sizeInBytes-=t.size}toArray(){const t=[];let n=this.head;for(;n!==null;)t.push(n.value),n=n.next;return t}get length(){return this.lengthInNodes}get size(){return this.sizeInBytes}toOrderedArray(){return Array.from(this)}[Symbol.iterator](){let t=this.head;return{next:()=>{if(!t)return{done:!0,value:null};const n=t.value;return t=t.next,{done:!1,value:n}}}}}const Ee=e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString()+"n":n);function Z(e){return typeof e=="string"?e:Ee(e)||""}var Ce=Object.defineProperty,ke=(e,t,n)=>t in e?Ce(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,T=(e,t,n)=>ke(e,typeof t!="symbol"?t+"":t,n);class K{constructor(t,n=k){T(this,"logs"),T(this,"level"),T(this,"levelValue"),T(this,"MAX_LOG_SIZE_IN_BYTES"),this.level=t??"error",this.levelValue=d.exports.levels.values[this.level],this.MAX_LOG_SIZE_IN_BYTES=n,this.logs=new Y(this.MAX_LOG_SIZE_IN_BYTES)}forwardToConsole(t,n){n===d.exports.levels.values.error?console.error(t):n===d.exports.levels.values.warn?console.warn(t):n===d.exports.levels.values.debug?console.debug(t):n===d.exports.levels.values.trace?console.trace(t):console.log(t)}appendToLogs(t){this.logs.append(Z({timestamp:new Date().toISOString(),log:t}));const n=typeof t=="string"?JSON.parse(t).level:t.level;n>=this.levelValue&&this.forwardToConsole(t,n)}getLogs(){return this.logs}clearLogs(){this.logs=new Y(this.MAX_LOG_SIZE_IN_BYTES)}getLogArray(){return Array.from(this.logs)}logsToBlob(t){const n=this.getLogArray();return n.push(Z({extraMetadata:t})),new Blob(n,{type:"application/json"})}}var Te=Object.defineProperty,Ie=(e,t,n)=>t in e?Te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Be=(e,t,n)=>Ie(e,typeof t!="symbol"?t+"":t,n);class Ae{constructor(t,n=k){Be(this,"baseChunkLogger"),this.baseChunkLogger=new K(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}downloadLogsBlobInBrowser(t){const n=URL.createObjectURL(this.logsToBlob(t)),s=document.createElement("a");s.href=n,s.download=`walletconnect-logs-${new Date().toISOString()}.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(n)}}var xe=Object.defineProperty,Pe=(e,t,n)=>t in e?xe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ne=(e,t,n)=>Pe(e,typeof t!="symbol"?t+"":t,n);class Ve{constructor(t,n=k){Ne(this,"baseChunkLogger"),this.baseChunkLogger=new K(t,n)}write(t){this.baseChunkLogger.appendToLogs(t)}getLogs(){return this.baseChunkLogger.getLogs()}clearLogs(){this.baseChunkLogger.clearLogs()}getLogArray(){return this.baseChunkLogger.getLogArray()}logsToBlob(t){return this.baseChunkLogger.logsToBlob(t)}}var $e=Object.defineProperty,Fe=Object.defineProperties,Me=Object.getOwnPropertyDescriptors,q=Object.getOwnPropertySymbols,De=Object.prototype.hasOwnProperty,Ge=Object.prototype.propertyIsEnumerable,J=(e,t,n)=>t in e?$e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,I=(e,t)=>{for(var n in t||(t={}))De.call(t,n)&&J(e,n,t[n]);if(q)for(var n of q(t))Ge.call(t,n)&&J(e,n,t[n]);return e},B=(e,t)=>Fe(e,Me(t));function Ue(e){return B(I({},e),{level:e?.level||X.level})}function H(e,t,n=S){return e[n]=t,e}function W(e,t=S){return e[t]||""}function Q(e,t,n=S){const s=W(e,n);return s.trim()?`${s}/${t}`:t}function Re(e,t,n=S){const s=Q(e,t,n),i=e.child({context:s});return H(i,s,n)}function ee(e){var t,n;const s=new Ae((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:d.exports(B(I({},e.opts),{level:"trace",browser:B(I({},(n=e.opts)==null?void 0:n.browser),{write:i=>s.write(i)})})),chunkLoggerController:s}}function te(e){var t;const n=new Ve((t=e.opts)==null?void 0:t.level,e.maxSizeInBytes);return{logger:d.exports(B(I({},e.opts),{level:"trace"}),n),chunkLoggerController:n}}function Xe(e){return typeof e.loggerOverride<"u"&&typeof e.loggerOverride!="string"?{logger:e.loggerOverride,chunkLoggerController:null}:typeof window<"u"?ee(e):te(e)}h.MAX_LOG_SIZE_IN_BYTES_DEFAULT=k,h.PINO_CUSTOM_CONTEXT_KEY=S,h.PINO_LOGGER_DEFAULTS=X,h.formatChildLoggerContext=Q,h.generateChildLogger=Re,h.generateClientLogger=ee,h.generatePlatformLogger=Xe,h.generateServerLogger=te,h.getDefaultLoggerOptions=Ue,h.getLoggerContext=W,h.pino=_e,h.setLoggerContext=H,Object.defineProperty(h,"__esModule",{value:!0})});
//# sourceMappingURL=index.umd.js.map
